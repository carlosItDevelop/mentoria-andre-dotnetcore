@model IEnumerable<UserPermissionsViewModel>

<table>
    <thead>
        <tr>
            <th>Usuário</th>
            <th>Controller</th>
            <th>Action</th>
            <th>Ler</th>
            <th>Escrever</th>
            <th>Excluir</th>
            <th>Acesso Total</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            foreach (var permission in item.Permissions)
            {
                <tr>
                    <td>@item.User.UserName</td>
                    <td>@permission.ControllerName</td>
                    <td>@permission.ActionName</td>
                    <td><input type="checkbox" disabled @(permission.CanRead ? "checked" : "") /></td>
                    <td><input type="checkbox" disabled @(permission.CanWrite ? "checked" : "") /></td>
                    <td><input type="checkbox" disabled @(permission.CanDelete ? "checked" : "") /></td>
                    <td><input type="checkbox" disabled @(permission.CanAccessAll ? "checked" : "") /></td>
                    <td>
                        <form asp-action="UpdatePermission" method="post">
                            <input type="hidden" name="permissionId" value="@permission.Id" />
                            <input type="checkbox" name="canRead" @(permission.CanRead ? "checked" : "") />
                            <input type="checkbox" name="canWrite" @(permission.CanWrite ? "checked" : "") />
                            <input type="checkbox" name="canDelete" @(permission.CanDelete ? "checked" : "") />
                            <input type="checkbox" name="canAccessAll" @(permission.CanAccessAll ? "checked" : "") />
                            <button type="submit">Atualizar</button>
                        </form>
                        <form asp-action="RemovePermission" method="post">
                            <input type="hidden" name="permissionId" value="@permission.Id" />
                            <button type="submit">Remover</button>
                        </form>
                    </td>
                </tr>
            }
        }


    </tbody>
</table>